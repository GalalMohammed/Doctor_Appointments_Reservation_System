@using DAL.Enums
@model DoctorRegisterViewModel
@{
    ViewData["Title"] = "Doctor Register";
}

<form asp-action="DoctorRegister" class="d-flex flex-column gap-2 col-10 col-md-6 mx-auto" method="post" style="padding: 100px 20px 20px; color: var(--primary-color)" enctype="multipart/form-data">
    <h2>Enter Your Information</h2>
    <div asp-validation-summary="All" class="text-danger"></div>
    <div class="accordion form-container" id="doctorRegisterAccordion">

        <!-- Personal Information -->
        <div class="accordion-item doctor-register-div">
            <h2 class="accordion-header" id="headingPersonal">
                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapsePersonal">
                    Personal Information
                </button>
            </h2>
            <div id="collapsePersonal" class="accordion-collapse collapse show" data-bs-parent="#doctorRegisterAccordion">
                <div class="accordion-body register-input-group d-flex flex-column gap-3 justify-content-between">
                    <div class="row gap-1 gap-md-0">
                        <div class="col-md-6 col-sm-12">
                            <label asp-for="FirstName" class="my-1"></label>
                            <input asp-for="FirstName" class="login-form-input rounded-1" />
                            <span asp-validation-for="FirstName" class="text-danger"></span>
                        </div>
                        <div class="col-md-6 col-sm-12">
                            <label asp-for="LastName" class="my-1"></label>
                            <input asp-for="LastName" class="login-form-input rounded-1" />
                            <span asp-validation-for="LastName" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="row gap-1 gap-md-0">
                        <div class="col-md-6 col-sm-12">
                            <label asp-for="Gender" class="form-label"></label>
                            <select asp-for="Gender" asp-items="Html.GetEnumSelectList<Gender>()" class="form-select"></select>
                        </div>
                        <div class="col-md-6 col-sm-12">
                            <label asp-for="BirthDate" class="form-label"></label>
                            <input asp-for="BirthDate" class="form-control" type="date" />
                            <span asp-validation-for="BirthDate" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="mb-3 col-12 col-md-6">
                        <label asp-for="Image" class="form-label"></label>
                        <input asp-for="Image" class="form-control" type="file" />
                        <span asp-validation-for="Image" class="text-danger"></span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Contact Information -->
        <div class="accordion-item doctor-register-div">
            <h2 class="accordion-header" id="headingContact">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseContact">
                    Contact Information
                </button>
            </h2>
            <div id="collapseContact" class="accordion-collapse collapse" data-bs-parent="#doctorRegisterAccordion">
                <div class="accordion-body register-input-group d-flex flex-column gap-3 justify-content-between">
                    <div class="row gap-1 gap-md-0">
                        <div class="col-md-6 col-sm-12">
                            <label asp-for="Email" class="form-label"></label>
                            <input asp-for="Email" class="form-control" />
                            <span asp-validation-for="Email" class="text-danger"></span>
                        </div>
                        <div class="col-md-6 col-sm-12">
                            <label asp-for="PhoneNumber" class="form-label"></label>
                            <input asp-for="PhoneNumber" class="form-control" />
                            <span asp-validation-for="PhoneNumber" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="row gap-1 gap-md-0">
                        <div class="col-md-6 col-sm-12">
                            <label asp-for="Governorate" class="form-label"></label>
                            <select asp-for="Governorate" asp-items="Html.GetEnumSelectList<Governorate>()" class="form-select"></select>
                        </div>
                        <div class="col-md-6 col-sm-12">
                            <label asp-for="Address" class="form-label"></label>
                            <input asp-for="Address" class="form-control" />
                            <span asp-validation-for="Address" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="d-flex flex-column justify-content-evenly align-items-center">
                        <p class="align-self-start">Pick Your Location</p>
                        <span id="doctor-register-pick-location" class="btn login-submit mb-3">Pick Automatically (Permission Nedded)</span>
                        <span id="doctor-register-open-map" class="btn login-submit">Pick on Map</span>
                        <span asp-validation-for="Lat" class="text-danger"></span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Account Credentials -->
        <div class="accordion-item doctor-register-div">
            <h2 class="accordion-header" id="headingCredentials">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseCredentials">
                    Account Credentials
                </button>
            </h2>
            <div id="collapseCredentials" class="accordion-collapse collapse" data-bs-parent="#doctorRegisterAccordion">
                <div class="accordion-body">
                    <div class="mb-3">
                        <label class="form-label SP-primaryText" asp-for="Password"></label>
                        <div class="input-group">
                            <input asp-for="Password" class="form-control" type="password">
                            <button type="button" class="btn SP-toggle-password" data-target="#Password">
                                <i class="fa-solid fa-eye eye-icon"></i>
                            </button>
                        </div>
                        <span class="text-danger" asp-validation-for="Password"></span>
                    </div>
                    <div class="mb-3">
                        <label class="form-label SP-primaryText" asp-for="ConfirmPassword"></label>
                        <div class="input-group">
                            <input asp-for="ConfirmPassword" class="form-control" type="password">
                            <button type="button" class="btn SP-toggle-password" data-target="#ConfirmPassword">
                                <i class="fa-solid fa-eye eye-icon"></i>
                            </button>
                        </div>
                        <span class="text-danger" asp-validation-for="ConfirmPassword"></span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Professional Details -->
        <div class="accordion-item doctor-register-div">
            <h2 class="accordion-header" id="headingProfessional">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseProfessional">
                    Professional Details
                </button>
            </h2>
            <div id="collapseProfessional" class="accordion-collapse collapse" data-bs-parent="#doctorRegisterAccordion">
                <div class="accordion-body register-input-group d-flex flex-column gap-3 justify-content-between">
                    <div class="mb-3">
                        <label asp-for="SpecialtyID" class="form-label"></label>
                        <select asp-for="SpecialtyID" class="form-select" asp-items="@ViewBag.Specialties"></select>
                    </div>
                    <div class="row gap-2 gap-md-0">
                        <div class="col-md-6 col-sm-12">
                            <label asp-for="Fees" class="form-label"></label>
                            <input asp-for="Fees" class="form-control" />
                            <span asp-validation-for="Fees" class="text-danger"></span>
                        </div>
                        <div class="col-md-6 col-sm-12">
                            <label asp-for="WaitingTime" class="form-label"></label>
                            <input asp-for="WaitingTime" class="form-control" />
                            <span asp-validation-for="WaitingTime" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label asp-for="About" class="form-label"></label>
                        <textarea asp-for="About" class="form-control"></textarea>
                        <span asp-validation-for="About" class="text-danger"></span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Availability -->
        <div class="accordion-item doctor-register-div">
            <h2 class="accordion-header" id="headingAvailability">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseAvailability">
                    Availability
                </button>
            </h2>
            <div id="collapseAvailability" class="accordion-collapse collapse" data-bs-parent="#doctorRegisterAccordion">
                <div class="accordion-body register-input-group d-flex flex-column gap-3 justify-content-between">


                    <div class="row gap-2 gap-md-0">
                        <div class="col-md-6 col-sm-12">
                            <label asp-for="StartTime" class="form-label"></label>
                            <input asp-for="StartTime" class="form-control" type="time" />
                            <span asp-validation-for="StartTime" class="text-danger"></span>
                        </div>
                        <div class="col-md-6 col-sm-12">
                            <label asp-for="EndTime" class="form-label"></label>
                            <input asp-for="EndTime" class="form-control" type="time" />
                            <span asp-validation-for="EndTime" class="text-danger"></span>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label asp-for="WorkingDays" class="form-label"></label>
                        <div class="p-2 d-flex justify-content-between flex-wrap gap-2">
                            @foreach(var day in Enum.GetNames<WorkingDays>())
                            {
                                <div class="doctor-register-days col-5 col-md-3">
                                    <input type="checkbox" id="@day" name="@day" class="form-check-inline" />
                                    <label for="@day" class="form-check-label">@day</label>
                                </div>
                            }
                        </div>
                    </div>
                    <div class="mb-3 col-12 col-md-6">
                        <label asp-for="ReservationQuota" class="form-label"></label>
                        <input asp-for="ReservationQuota" class="form-control" />
                        <span asp-validation-for="ReservationQuota" class="text-danger"></span>
                    </div>
                </div>
            </div>
        </div>
    
    </div>
    <div class="d-flex justify-content-center m-3">
        <input type="submit" class="btn login-submit mb-3 w-50" value="Register" />
    </div>
</form>

@section Scripts {
    <script src="~/js/doctor-register.js"></script>
    <script>
        document.querySelectorAll(".SP-toggle-password").forEach(button => {
            button.addEventListener("click", function() {
                let input = document.querySelector(this.getAttribute("data-target"));
                let icon = this.querySelector(".eye-icon");

                if (input.type === "password") {
                    input.type = "text";
                    icon.classList.replace("fa-eye", "fa-eye-slash"); // Change icon to eye-slash
                } else {
                    input.type = "password";
                    icon.classList.replace("fa-eye-slash", "fa-eye"); // Change icon to eye
                }
            });
        });
    </script>
    <partial name="_ValidationScriptsPartial" />
}